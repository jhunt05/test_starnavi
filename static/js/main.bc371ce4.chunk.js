(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{19:function(e,t,a){e.exports=a(31)},24:function(e,t,a){},25:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(5),s=a.n(o),c=(a(24),a(25),a(2)),l=a(16),u=a(4),i=a(17),m={LOAD_SETTINGS:"LOAD_SETTINGS",LOAD_WINNERS:"LOAD_WINNERS",ADD_WINNER:"ADD_WINNER",SET_USERNAME:"SET_USERNAME"};var d=function(){return function(e,t){return fetch("https://starnavi-frontend-test-task.herokuapp.com/game-settings").then((function(e){return e.json()})).then((function(t){var a;e((a=t,{type:m.LOAD_SETTINGS,payload:a}))}))}},b=function(){return function(e,t){return fetch("https://starnavi-frontend-test-task.herokuapp.com/winners").then((function(e){return e.json()})).then((function(t){var a;e((a=t,{type:m.LOAD_WINNERS,payload:a}))}))}};function p(e){var t=e.getHours(),a=e.getMinutes(),n=e.getDate(),r=e.getMonth(),o=e.getFullYear();return a<10&&(a="0"+a),"".concat(t,":").concat(a," ").concat(n," ").concat(["January","February","March","April","May","June","July","August","September","October","November","December"][r]," ").concat(o)}function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var E={settings:[],winners:[],userName:"",loading:!1,error:null};var g=a(9),N=a(6),v=a(7),h=a(10),w=a(8),k=a(11);var S=function(e){var t=e.onInputChange,a=e.gameMode,n=e.onSelectChange,o=e.game,s=e.settings,c=e.userName,l=e.startPlaying,u=e.getTimerId,i=e.squares;return r.a.createElement("form",{className:"gameForm"},r.a.createElement("select",{value:a,onChange:n,required:!0,className:"select"},r.a.createElement("option",{value:"Pick game mode",disabled:!0},"Pick game mode"),r.a.createElement("option",{value:"Easy"},"Easy"),r.a.createElement("option",{value:"Medium"},"Medium"),r.a.createElement("option",{value:"Hard"},"Hard")),r.a.createElement("input",{className:"input",required:!0,type:"text",placeholder:"Enter your name",onChange:function(e){return t(e.target.value)}}),r.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault(),l();var t=document.querySelector(".winner"),n=document.querySelector(".ui.button"),r=document.querySelector(".select"),m=document.querySelector(".input"),d=document.querySelector(".ui.reset");if(c&&"Pick game mode"!==a){n.disabled="true",r.disabled="true",m.disabled="true",t.style.opacity=0,d.style.display="none";var b=!0,p=!1,f=void 0;try{for(var y,E=i[Symbol.iterator]();!(b=(y=E.next()).done);b=!0){y.value.style.backgroundColor="#f3f3f3"}}catch(N){p=!0,f=N}finally{try{b||null==E.return||E.return()}finally{if(p)throw f}}var g=setInterval(o,s.delay);u(g)}else alert("Enter info")},className:"ui button"},"Play"))},R=function(e){function t(){var e,a;Object(N.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).chooseBtn=function(){var e=document.querySelectorAll(".boardBtn");0!==e.length&&a.props.getSquares(e)},a}return Object(k.a)(t,e),Object(v.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.squares===e.squares&&this.chooseBtn()}},{key:"render",value:function(){var e=this.props,t=e.btnSettings,a=e.resetField,n=Array(t.field).fill(null);switch(t.field){case 5:return r.a.createElement("div",{className:"gameBoard"},r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("button",{onClick:a,className:"reset ui button"},"Reset field"));case 10:return r.a.createElement("div",{className:"gameBoard"},r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("button",{onClick:a,className:"reset ui button"},"Reset field"));case 15:return r.a.createElement("div",{className:"gameBoard"},r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},n.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("button",{onClick:a,className:"reset ui button"},"Reset field"));default:return r.a.createElement("span",{className:"startGameSpan"},"Enter info to start a game")}}}]),t}(r.a.Component),O=function(e){var t=e.winners.slice(-4);return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"rules"},r.a.createElement("details",null,r.a.createElement("summary",{className:"ui inverted button"},"Rules"),r.a.createElement("div",{className:"ui card"},r.a.createElement("p",null,"Click on square, if he's highlighted blue. If you managed to click during time - square will become green and you will get the point, if not - square will turns red and the point will go to computer. When 50% of field will be green or red, game will stop")))),r.a.createElement("div",{className:"leadersTable"},r.a.createElement("h2",null,"Leader Board"),r.a.createElement("table",{className:"ui celled table"},r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{className:"Computer"===e.winner?"negativeResult":"positiveResult",key:e.id},r.a.createElement("td",null,e.winner),r.a.createElement("td",null,e.date))}))))))},B=function(e){function t(e){var a;return Object(N.a)(this,t),(a=Object(h.a)(this,Object(w.a)(t).call(this,e))).onSelectChange=function(e){a.setState({gameMode:e.target.value})},a.startPlaying=function(){a.setState({isPlaying:!0})},a.getTimerId=function(e){a.setState({timerId:e})},a.sendWinnerToServer=function(e){return fetch("https://starnavi-frontend-test-task.herokuapp.com/winners",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({winner:e,date:p(new Date)})}).then((function(e){return e.json()})).then((function(e){return e.success})).catch((function(e){console.error(e)}))},a.game=function(){var e=a.state.squares,t=Object(u.a)(e),n=Math.floor(Math.random()*t.length),r=a.getSettings(),o=function(){var e=document.querySelector(".ui.button"),t=document.querySelector(".select"),n=document.querySelector(".input"),r=document.querySelector(".winner"),o=document.querySelector(".ui.reset");r.style.opacity=1,o.style.display="block",clearInterval(a.state.timerId),e.innerHTML="Play again",e.disabled=!1,t.disabled=!1,n.disabled=!1};"blue"!==t[n].style.backgroundColor&&"red"!==t[n].style.backgroundColor&&"green"!==t[n].style.backgroundColor&&(a.state.isPlaying&&(function(e){e[n].style.backgroundColor="blue",e[n].addEventListener("click",(function(){e[n].style.backgroundColor="green"})),setTimeout((function(){"blue"===e[n].style.backgroundColor&&(e[n].style.backgroundColor="red",e[n].disabled="true")}),r.delay)}(t),function(e){var t=[],n=[],r=a.props.userName,s=!0,c=!1,l=void 0;try{for(var u,i=e[Symbol.iterator]();!(s=(u=i.next()).done);s=!0){var m=u.value;"green"===m.style.backgroundColor?t.push(1):"red"===m.style.backgroundColor&&n.push(1)}}catch(d){c=!0,l=d}finally{try{s||null==i.return||i.return()}finally{if(c)throw l}}if(t.length>=e.length/2)a.props.addWinner(r),a.setState({isPlaying:!1,winner:r}),a.sendWinnerToServer(r),o();else{if(!(n.length>=e.length/2))return;a.props.addWinner("Computer"),a.setState({isPlaying:!1,winner:"Computer"}),a.sendWinnerToServer("Computer"),o()}}(t)),a.setState({squares:t}))},a.getSquares=function(e){a.setState({squares:e})},a.resetField=function(){var e=a.state.squares,t=Object(u.a)(e),n=!0,r=!1,o=void 0;try{for(var s,c=t[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){s.value.style.backgroundColor="#f3f3f3"}}catch(l){r=!0,o=l}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}},a.getSettings=function(){switch(a.state.gameMode){case"Easy":return a.props.settings.easyMode;case"Medium":return a.props.settings.normalMode;case"Hard":return a.props.settings.hardMode;default:return{field:0,delay:0}}},a.state={gameMode:"Pick game mode",isPlaying:!1,squares:[],winner:null},a}return Object(k.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchSettings(),this.props.fetchWinners()}},{key:"render",value:function(){var e=this.props,t=e.userName,a=e.winners,n=e.setName;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"game"},r.a.createElement(S,{onInputChange:n,gameMode:this.state.gameMode,onSelectChange:this.onSelectChange,game:this.game,settings:this.getSettings(),userName:t,isPlaying:this.state.isPlaying,startPlaying:this.startPlaying,getTimerId:this.getTimerId,squares:this.state.squares}),r.a.createElement("span",{className:"winner"},this.state.winner," is winner!"),r.a.createElement(R,{btnSettings:this.getSettings(),getSquares:this.getSquares,squares:this.state.squares,resetField:this.resetField})),r.a.createElement(O,{winners:a}))}}]),t}(r.a.Component);var j=Object(g.b)((function(e){return{settings:e.settings,winners:e.winners,userName:e.userName}}),(function(e){return{fetchSettings:Object(c.b)(d,e),fetchWinners:Object(c.b)(b,e),setName:function(t){return e((a=t,{type:m.SET_USERNAME,payload:a}));var a},addWinner:function(t){return e(function(e){return{type:m.ADD_WINNER,payload:e}}(t))}}}))(B),q=Object(c.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.LOAD_SETTINGS:return y({},e,{loading:!1,settings:t.payload});case m.LOAD_WINNERS:return y({},e,{loading:!1,winners:t.payload});case m.SET_USERNAME:return y({},e,{userName:t.payload});case m.ADD_WINNER:var a={winner:t.payload,date:p(new Date),id:Math.random()};return y({},e,{winners:[].concat(Object(u.a)(e.winners),[a])});default:return e}}),Object(c.a)(l.a));var C=function(){return r.a.createElement(g.a,{store:q},r.a.createElement(j,null))};s.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.bc371ce4.chunk.js.map