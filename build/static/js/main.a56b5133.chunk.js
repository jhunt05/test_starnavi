(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{19:function(e,t,a){e.exports=a(31)},24:function(e,t,a){},25:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(4),s=a.n(o),c=(a(24),a(25),a(2)),l=a(16),u=a(9),i=a(17),m={LOAD_SETTINGS:"LOAD_SETTINGS",LOAD_WINNERS:"LOAD_WINNERS",ADD_WINNER:"ADD_WINNER",SET_USERNAME:"SET_USERNAME"};var d=function(){return function(e,t){return fetch("http://starnavi-frontend-test-task.herokuapp.com/game-settings").then((function(e){return e.json()})).then((function(t){var a;e((a=t,{type:m.LOAD_SETTINGS,payload:a}))}))}},b=function(){return function(e,t){return fetch("http://starnavi-frontend-test-task.herokuapp.com/winners").then((function(e){return e.json()})).then((function(t){var a;e((a=t,{type:m.LOAD_WINNERS,payload:a}))}))}};function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={settings:[],winners:[],userName:"",loading:!1,error:null};var E=a(8),g=a(5),N=a(6),v=a(10),h=a(7),w=a(11);var S=function(e){var t=e.onInputChange,a=e.gameMode,n=e.onSelectChange,o=e.game,s=e.settings,c=e.userName,l=e.startPlaying,u=e.getTimerId,i=e.squares;return r.a.createElement("form",{className:"gameForm"},r.a.createElement("select",{value:a,onChange:n,required:!0,className:"select"},r.a.createElement("option",{value:"Pick game mode",disabled:!0},"Pick game mode"),r.a.createElement("option",{value:"Easy"},"Easy"),r.a.createElement("option",{value:"Medium"},"Medium"),r.a.createElement("option",{value:"Hard"},"Hard")),r.a.createElement("input",{className:"input",required:!0,type:"text",placeholder:"Enter your name",onChange:function(e){return t(e.target.value)}}),r.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault(),l();var t=document.querySelector(".winner"),n=document.querySelector(".ui.button"),r=document.querySelector(".select"),m=document.querySelector(".input");if(c&&"Pick game mode"!==a){n.disabled="true",r.disabled="true",m.disabled="true",t.style.opacity=0;var d=!0,b=!1,p=void 0;try{for(var f,y=i[Symbol.iterator]();!(d=(f=y.next()).done);d=!0){f.value.style.backgroundColor=""}}catch(g){b=!0,p=g}finally{try{d||null==y.return||y.return()}finally{if(b)throw p}}var E=setInterval(o,s.delay);u(E)}else alert("Enter info")},className:"ui button"},"Play"))},k=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).chooseBtn=function(){var e=document.querySelectorAll(".boardBtn");0!==e.length&&a.props.getSquares(e)},a}return Object(w.a)(t,e),Object(N.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.squares===e.squares&&this.chooseBtn()}},{key:"render",value:function(){var e=this.props.btnSettings,t=Array(e.field).fill(null);switch(e.field){case 5:return r.a.createElement("div",{className:"gameBoard"},r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))));case 10:return r.a.createElement("div",{className:"gameBoard"},r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))));case 15:return r.a.createElement("div",{className:"gameBoard"},r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))),r.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return r.a.createElement("button",{key:t,className:"boardBtn"})}))));default:return r.a.createElement("span",{className:"startGameSpan"},"Enter info to start a game")}}}]),t}(r.a.Component),O=function(e){var t=e.winners.slice(-4);return r.a.createElement("div",{className:"leadersTable"},r.a.createElement("h2",null,"Leader Board"),r.a.createElement("table",{className:"ui celled table"},r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{className:"Computer"===e.winner?"negativeResult":"positiveResult",key:e.id},r.a.createElement("td",null,e.winner),r.a.createElement("td",null,e.date))})))))},R=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(v.a)(this,Object(h.a)(t).call(this,e))).onSelectChange=function(e){a.setState({gameMode:e.target.value})},a.startPlaying=function(){a.setState({isPlaying:!0})},a.getTimerId=function(e){a.setState({timerId:e})},a.sendWinnerToServer=function(e){return fetch("http://starnavi-frontend-test-task.herokuapp.com/winners",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({winner:e,date:(new Date).toUTCString()})}).then((function(e){return e.json()})).then((function(e){return e.success})).catch((function(e){console.error(e)}))},a.game=function(){var e=a.state.squares,t=Object(u.a)(e),n=Math.floor(Math.random()*t.length),r=a.getSettings(),o=function(e){var t=document.querySelector(".ui.button"),n=document.querySelector(".select"),r=document.querySelector(".input");document.querySelector(".winner").style.opacity=1,clearInterval(a.state.timerId),t.innerHTML="Play again",t.disabled=!1,n.disabled=!1,r.disabled=!1,r.value=""};"blue"!==t[n].style.backgroundColor&&"red"!==t[n].style.backgroundColor&&"green"!==t[n].style.backgroundColor&&(a.state.isPlaying&&(function(e){e[n].style.backgroundColor="blue",e[n].addEventListener("click",(function(){e[n].style.backgroundColor="green"})),setTimeout((function(){"blue"===e[n].style.backgroundColor&&(e[n].style.backgroundColor="red",e[n].disabled="true")}),r.delay)}(t),function(e){var t=[],n=[],r=a.props.userName,s=!0,c=!1,l=void 0;try{for(var u,i=e[Symbol.iterator]();!(s=(u=i.next()).done);s=!0){var m=u.value;"green"===m.style.backgroundColor?t.push(1):"red"===m.style.backgroundColor&&n.push(1)}}catch(d){c=!0,l=d}finally{try{s||null==i.return||i.return()}finally{if(c)throw l}}if(t.length>=e.length/2)a.props.addWinner(r),a.setState({isPlaying:!1,winner:r}),a.sendWinnerToServer(r),o();else{if(!(n.length>=e.length/2))return;a.props.addWinner("Computer"),a.setState({isPlaying:!1,winner:"Computer"}),a.sendWinnerToServer("Computer"),o()}}(t)),a.setState({squares:t}))},a.getSquares=function(e){a.setState({squares:e})},a.getSettings=function(){switch(a.state.gameMode){case"Easy":return a.props.settings.easyMode;case"Medium":return a.props.settings.normalMode;case"Hard":return a.props.settings.hardMode;default:return{field:0,delay:0}}},a.state={gameMode:"Pick game mode",isPlaying:!1,squares:[],winner:null},a}return Object(w.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchSettings(),this.props.fetchWinners()}},{key:"render",value:function(){var e=this.props,t=e.userName,a=e.winners,n=e.setName;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"game"},r.a.createElement(S,{onInputChange:n,gameMode:this.state.gameMode,onSelectChange:this.onSelectChange,game:this.game,settings:this.getSettings(),userName:t,isPlaying:this.state.isPlaying,startPlaying:this.startPlaying,getTimerId:this.getTimerId,squares:this.state.squares}),r.a.createElement("span",{className:"winner"},this.state.winner," is winner!"),r.a.createElement(k,{btnSettings:this.getSettings(),getSquares:this.getSquares,squares:this.state.squares})),r.a.createElement(O,{winners:a}))}}]),t}(r.a.Component);var B=Object(E.b)((function(e){return{settings:e.settings,winners:e.winners,userName:e.userName}}),(function(e){return{fetchSettings:Object(c.b)(d,e),fetchWinners:Object(c.b)(b,e),setName:function(t){return e((a=t,{type:m.SET_USERNAME,payload:a}));var a},addWinner:function(t){return e(function(e){return{type:m.ADD_WINNER,payload:e}}(t))}}}))(R),j=Object(c.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.LOAD_SETTINGS:return f({},e,{loading:!1,settings:t.payload});case m.LOAD_WINNERS:return f({},e,{loading:!1,winners:t.payload});case m.SET_USERNAME:return f({},e,{userName:t.payload});case m.ADD_WINNER:var a={winner:t.payload,date:(new Date).toUTCString(),id:Math.random()};return f({},e,{winners:[].concat(Object(u.a)(e.winners),[a])});default:return e}}),Object(c.a)(l.a));var C=function(){return r.a.createElement(E.a,{store:j},r.a.createElement(B,null))};s.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.a56b5133.chunk.js.map